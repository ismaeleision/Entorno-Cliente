<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

</head>

<body>
  <div class="container-fluid">
    <script>
      var poblaciones = ["Localidad", "Enero", "Febrero", "Marzo", "Abril"];
      var temperaturas = [["Cuevas del Alamanzora", 12, 13, 15, 18], ["Granada", 4.5, 8, 9, 15], ["Madrid", 4, 5.8, 8, 13], ["Soria", 0, 1, 6, 10]];
      temperaturas.push(["Malaga", 14, 16.7, 18.4, 20.3]);
      var media = temMediaPoblacion(temperaturas);


      //cabecera de la tabla
      document.write("<table class='table table-hover'><thead><tr>");
      for (let i = 0; i < 5; i++) {
        document.write("<td>" + poblaciones[i] + "</td>");
      }
      document.write("<td>MEDIA</td>");
      //contenido de la tabla
      document.write("</tr></thead><tbody>");
      for (let i = 0; i < 5; i++) {
        document.write("<tr>");
        for (let j = 0; j < 5; j++) {
          document.write("<td>" + temperaturas[i][j] + "</td>");
        }
        document.write("<td>" + media[i] + "</td>");
        document.write("</tr>");
      }
      document.write("</tbody></table>");


      masAltaMarzo(temperaturas);
      mediaAbril(temperaturas);
      temMasBaja(temperaturas);

      //funciones
      //Media de temperatura por poblacion
      function temMediaPoblacion(array) {
        let media = new Array();
        let temperatura;
        for (let i = 0; i < 5; i++) {
          temperatura = 0;
          for (let j = 1; j < 5; j++) {
            temperatura += array[i][j];
          }
          temperatura = temperatura / 4;
          media.push(temperatura);
        }
        return media;
      }

      //Calcula la temperatura más alta en Marzo y a que población corresponde
      function masAltaMarzo(array) {
        let seleccion = new Array();
        let mayor = 0;
        for (let i = 0; i < 5; i++) {
          if (mayor < array[i][3]) {
            mayor = array[i][3];
            seleccion.splice(0);
            seleccion.push(array[i][0], array[i][3]);
          }
        }
        document.write("La temperatura mas alta en Marzo ha sido " + seleccion[0] + " y corresponde a la poblacion " + seleccion[1] + "<br>");
      }

      //Calcula la media de la temperatura en el mes de abril
      function mediaAbril(array) {
        let media = 0;
        for (let i = 0; i < 5; i++) {
          media += array[i][4];
        }
        document.write("La temperatura media alta en Abril ha sido " + media / 5 + "<br>");
      }

      //Mostrar la población con peor media de temperatura
      function temMasBaja(array) {
        let seleccion = new Array();
        let mayor = 9999;
        for (let i = 0; i < 5; i++) {
          for (let j = 0; j < 5; j++) {
            if (mayor > array[i][j]) {
              mayor = array[i][j];
              seleccion.splice(0);
              seleccion.push(array[i][0], array[i][j]);
            }
          }

        }
        document.write("La temperatura mas baja ha sido en " + seleccion[0] + "<br>");
      }
    </script>
  </div>
</body>

</html>